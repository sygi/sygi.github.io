<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
      <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-XG30NLF042"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-XG30NLF042');
        </script>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width">
        <meta property="og:title" content="Learning Blender">
        
        
        <meta name="author" content="Jakub Sygnowski">
        
        
        <meta name="robots" content="index,follow">
        <meta name="googlebot" content="index,follow">
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="icon" href="../images/favicon.png" />
        <title>Learning Blender</title>
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">Cemetery of Forgotten Projects</a>
            </div>
            <div id="navigation">
                <a href="../subpages/about.html">About me</a>

                <a href="../rss.xml"><img src="../images/rss_icon.svg" alt="RSS feed" /></a>
            </div>
        </div>

        <div id="content">
            <div class="info">
    Posted on October 22, 2021
    
</div>
<h1>Learning Blender</h1>
<p>When I was doing the graphics for the T.I.M.E stories expansion, I tried out various workflows for creating the content. Looking for inspiration on how professionals make art faster, I encountered a GDC talk titled <a href="https://www.youtube.com/watch?v=CYbYvImd7Bw&amp;ab_channel=GDC">Concept Art is Dead</a>. It claimed that no one is drawing things from scratch and everyone uses quick shortcuts like rendering a scene in Blender to get nice shadows or copying the texture from the internet instead. I tried it out to see how learning the basics of Blender may help me in creating 2D graphics.</p>
<h2 id="thoughts-on-3d-modeling">Thoughts on 3D modeling</h2>
<p>Having grown up playing games like The Sims (1!) or Syberia, I didn’t associate 3D graphics with high quality. Only when rediscovering games as an adult and seeing friends doing crazy realistic renders using <a href="https://en.wikipedia.org/wiki/Physically_based_rendering">physically based rendering</a> did I realize the progress computer graphics made in the last couple of years.</p>
<figure>
<img src="../images/blender/syberia.jpg" style="width:40.0%" alt="Screenshot from Syberia" />
<img src="../images/blender/render.jpg" style="width:45.0%" alt="Example high-quality 3D render" />
<figcaption>
Screenshot from the Syberia game (2002) vs <a href="https://www.artstation.com/artwork/bRa9r">Castle Duurstede</a> render (2017).
</figcaption>
</figure>
<p>While comparing PBR to the old graphics is not fair, as the former uses way more compute, recent improvements in hardware (like NVIDIA RTXs) narrowed the gap to the point where PBR technology becomes close to real-time.</p>
<p>Another part of the 3D workflow that starts to get hardware improvements is asset creation. An ability to scan a 3D object (<a href="https://en.wikipedia.org/wiki/Photogrammetry">photogrammetry</a>), which used to be pure science fiction a couple of years back, is being made possible with advances in AI and better cameras.
For example, the new iPhone includes a lidar camera, which captures not only RGB but also depth. It makes the automatic 3D model construction more accurate.</p>
<p>Having friends who regularly chat about computer graphics, I wanted to get more familiar with it for some time now. Making the graphics for the game turned out to generate enough motivation to actually do something.</p>
<h2 id="blender-guru-tutorials">Blender Guru tutorials</h2>
<p>I started learning Blender by following a classic <a href="https://www.youtube.com/watch?v=TPrnSACiTJ4&amp;t=9s&amp;ab_channel=BlenderGuru">Donut tutorial</a> by Andrew Price who also turned out to be the person behind <a href="https://www.youtube.com/watch?v=Qj1FK8n7WgY&amp;t=549s&amp;ab_channel=BlenderGuru">Understanding Color</a> and <a href="https://www.youtube.com/watch?v=vM39qhXle4g&amp;t=1s&amp;ab_channel=Blender">The Habits of Effective Artists</a>, which I highly enjoyed.
It’s a popular entry point for Blender, with the first video having been watched &gt;10M times. And for a good reason: the tutorial is very approachable, yet it shows lots of elements in a short time. It regularly reminds the keyboard shortcuts, which is very useful in a complex program like Blender.</p>
<figure>
<a href="../images/blender/donut.png"><img src="../images/blender/donut-res.png" style="width:45.0%" alt="Render of a donut" /></a>
<a href="../images/blender/cup.png"><img src="../images/blender/cup-res.png" style="width:45.0%" alt="Render of a cup" /></a>
<figcaption>
My final donut and cup renders. While I see a couple of things I could improve, I decided to leave them be and move forward to other challenges.
</figcaption>
</figure>
<p>After the Donut tutorial, I watched the <a href="https://www.youtube.com/watch?v=cg1K_ZWB0Uw&amp;list=RDCMUCOKHwx1VCdgnxwbjyb9Iu1g&amp;index=23&amp;ab_channel=BlenderGuru">Lightning for Beginners</a> but didn’t follow with any exercises.</p>
<h2 id="playing-on-my-own">Playing on my own</h2>
<p>Afterward, I went to model the barrack for the time stories expansion. I took a photo from an online museum, imported it to Blender, and tried to reconstruct the model based on it.
While making the whole building required some work, the modeling techniques presented in the donut tutorial were enough to create a reasonable shape.</p>
<figure>
<img src="../images/blender/barrack.png" style="width:60.0%" alt="Final render of the barrack used in the T.I.M.E stories expansion." />
<figcaption aria-hidden="true">Final render of the barrack used in the T.I.M.E stories expansion.</figcaption>
</figure>
<p>The nice part about creating the graphics in 3D was that I could reuse the single building in multiple places, creating various shots from inside, outside, between two buildings, etc. In the end, I used it in the creation of 5 scenes.</p>
<h2 id="legally-stealing-work-of-others">(Legally) stealing work of others</h2>
<p>Modeling the shape of the building is only the first part of the workflow. There was a couple of smaller assets that I needed, like: the window, railing, bunk beds, etc.
I wasn’t doing them on my own.</p>
<p>To my surprise, it’s possible to find lots of re-usable assets for free on the internet.
I used these two a lot:</p>
<ul>
<li><a href="https://sketchfab.com/">sketchfab</a> for 3D assets. A lot of ones available there are licensed with CC attribution: one can use them for any reason (including commercial use) but need to attribute the author.</li>
<li><a href="https://polyhaven.com">Poly Haven</a> for “physically based” textures of various surfaces: grass, wall, brick, etc.
To make the materials look good, I needed to play with the lightning and the properties of the materials’ <a href="https://en.wikipedia.org/wiki/Bidirectional_reflectance_distribution_function">BRDF</a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. I think there is a big room for improvement here, but I accepted the good-enough version of the renders.</li>
</ul>
<h3 id="rigid-bodies">Rigid bodies</h3>
<p>In one of the scenes in the game, I have a couple of people lying on the ground. While I was planning to not include people in the render and only paste them afterward, I considered it an opportunity to try the physics simulation that Blender has.</p>
<figure>
<video width="410" height="310" controls>
<source src="../images/blender/rigid.mp4" type="video/mp4">
Your browser does not support the video tag.
</video>
<figcaption>
An animation of cubes being hit by a chained ball from a <a href="https://www.youtube.com/watch?v=nHVYYMG3QVY">Blender guru tutorial</a>.
</figcaption>
</figure>
<p>I thought it would be as simple as downloading one of many character models available on the internet, turning the gravity on, and seeing the bodies being animated by the engine.</p>
<p>While finding a model of a person wasn’t hard<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, I needed to learn (or re-learn) a bit more about how the physics simulator works to make it happen.
To make an object be affected by gravity, one needs to make it a <a href="https://docs.blender.org/manual/en/latest/physics/rigid_body/index.html">rigid body</a>. If done straightforwardly, it makes the character react to gravity but doesn’t cause it to deform when hitting other objects (it’s a <em>rigid</em> body after all).</p>
<h4 id="rigging">Rigging</h4>
<p>Expressing how exactly to deform a character mesh, which consists of thousands of vertices sounds very complex. At the same time, animators don’t need such granularity: they do more general things like: “raise a left arm” or “turn head to the right”, not move vertices in arbitrary directions.</p>
<p>To make controlling the characters easier, people create rigs. It’s a set of controls, called <em>bones</em>, which are connected to different parts of the character mesh in a way that if the bone moves, the corresponding vertices in the body (called “skin” in this context) are moving together with it.</p>
<p>This way, the animator has 10 or 20 controls that it can use, like “left arm”, and he makes the character move using them.
The good characters that you can find online come “rigged”, i.e. with the rig (also called the armature) created and ready to be used.</p>
<p>Using bones is not trivial in the context of rigid bodies. As they are attached to a mesh but are not a proper body on their own, you cannot make a bone a rigid body to be affected by gravity.
To overcome this problem, at first, I tried using the <a href="https://github.com/Pauan/blender-rigid-body-bones">rigid bones</a> blender add-on. It allows you to easily transform a set of bones into rigid bodies.</p>
<figure>
<img src="../images/blender/broken.gif" style="width:30.0%" alt="The effect of applying rigid bones to the skeleton character I used." />
<figcaption aria-hidden="true">The effect of applying rigid bones to the skeleton character I used.</figcaption>
</figure>
<p>I encountered lots of problems when using this setup, with the character spinning with increasing velocity, the bones moving away in random directions, or passing through the ground.</p>
<h4 id="parent-child-relationship">Parent-child relationship</h4>
<p>I tried changing some settings of the physics engine to prevent it from exploding but without success. A couple of tutorials and many hours of trial and error later, I managed to fix the problem.</p>
<p>A concept I understood was a parent-child relationship between the objects. In Blender, you can make one object (A) a parent of another (B), what makes A follow any transformation that B is performing.</p>
<p>It is a mechanism that makes the mesh follow the bones (as the armature is a parent of the object). The rigid bones add-on also uses it: it just creates a rigid-body cube around each bone and parent bone to the cube, such that the cube is affected by gravity, and bones are moving because their parents do.</p>
<p>Just adding the bones and the cubes around them doesn’t let the engine know that you want them to move together: Blender sees each cube as a separate rigid body and doesn’t try to keep them close to each other.
To fix this, one needs to use <a href="https://docs.blender.org/manual/en/latest/physics/rigid_body/constraints/introduction.html">rigid body constraint</a>s.
It creates an empty (an object without mass or volume) between two cubes that constrain the movement between them. For example, one can make moving the foot backward impossible using a constraint.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p>When put together, the physics simulation moves the cubes, following the constraints, the cubes are moving the bones, and the bones are moving the mesh (skin).</p>
<figure>
<figure>
<img src="../images/blender/working.gif" style="width:30.0%" alt="Somewhat working rigid body character" />
<figcaption aria-hidden="true">Somewhat working rigid body character</figcaption>
</figure>
<figcaption>
Final character animation I got. There are still things that could be fixed (I didn’t set all of the constraints correctly), but I think I got the gist of how the physics engine works.
</figcaption>
</figure>
<h2 id="summary">Summary</h2>
<p>I found the process of learning Blender from Andrew’s tutorials really efficient, and Blender itself to be a good tool for creating the graphics that I was doing.
Even when the final product is a 2D image, the 3D model is a natural “intermediate representation” where you don’t have to worry about choosing perspective, lightning, or point of view, as you can always change them at the end.</p>
<p>I found the Blender a very effective tool for manipulating the models. It has a lot of parts that I only barely scratched the surface of, so I will surely be using it and learning more of it in the future.</p>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr />
<ol>
<li id="fn1"><p>Explaining various BRDF properties is a topic for another blog post :)<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>and while doing so, I discovered another great source of assets: <a href="mixamo.com">mixamo</a> with dozens of characters and their animations<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a href="https://www.youtube.com/watch?v=KUmIKWVrHZU&amp;ab_channel=BSWM">Here</a> is one tutorial that was nicely explaining creating gravity-aware characters.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>



<div id="disqus_thread"></div>
<script>
    var gaProperty = 'UA-85187126-1';
    var disableStr = 'ga-disable-' + gaProperty;
    if (document.cookie.indexOf(disableStr + '=true') == -1) {
      var disqus_config = function () {
          this.page.url = "https://sygnowski.ml"
          this.page.identifier = "sygii"
      };
      (function() {
          var d = document, s = d.createElement('script');
          s.src = '//sygii.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
    }
</script>


        </div>
        <div id="footer">
          <span id="privacy">
            <label class="cookie-switch">
              Cookies
              <input type="checkbox" id="cookie" checked />
            </label>
            <a href="../subpages/privacy.html">Privacy policy</a>
          </span>

          <span id="acknowledgements">
            Site built using
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
            <!--
            <a href="https://www.mathjax.org/">MathJax</a>,
            <a href="http://ignorethecode.net/blog/2010/04/20/footnotes/">Footnotes.js</a>,
            and <a href="https://www.bryanbraun.com/anchorjs/">AnchorJS</a>-->
          </span>
        </div>

    <link href="https://cdn.jsdelivr.net/npm/bilderrahmen@1.0.0/bilderrahmen.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/gh/requirejs/requirejs@2.3.5/require.js"></script>
    <script defer>
      
    require.config({
      paths: {
        'bilderrahmen': 'https://cdn.jsdelivr.net/npm/bilderrahmen@1.0.0/bilderrahmen.umd.es5',
        'anchorjs': 'https://cdn.jsdelivr.net/npm/anchor-js/anchor.min',
        'mathjax': 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML',
        'jquery': 'https://code.jquery.com/jquery-2.2.2.min', <!-- for footnotes -->
        'footnotes': '../../js/footnotes'
      }
    });

    
    
    require(['anchorjs'], function(module){
      const anchors = new module();
      anchors.add();
    });
    require(['mathjax']);
    require(['jquery'], function(jQuery){
      require(['footnotes']);
    });
    

    var gaProperty = 'G-XG30NLF042';
    var disableStr = 'ga-disable-' + gaProperty;
    const cookie = document.getElementById("cookie");
    cookie.addEventListener('change', (event) => {
      if(event.target.checked) {
        console.log("Turn cookies on");
        window[disableStr] = false;
        document.cookie = disableStr + '= ; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/';
      } else {
        console.log("Turn cookies off");
        document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
        window[disableStr] = true;
      }
    });
    if (document.cookie.indexOf(disableStr + '=true') > -1) {
      const cookie = document.getElementById("cookie");
      cookie.checked = false;
      window[disableStr] = true;
    }
    </script>
  </body>
</html>
